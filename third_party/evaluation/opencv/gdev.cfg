[apt]
build-essential
gfortran
git
libatlas-base-dev
libavcodec-dev
libavformat-dev
libdc1394-22-dev
libgtk-3-dev
libjpeg-dev
libpng-dev
libssl-dev
libswscale-dev
libtbb-dev
libtbb2
libtiff-dev
libv4l-dev
libx264-dev
libxvidcore-dev
openexr
pkg-config
python3-dev

[env]
CMAKE_VERSION=4.3.0

[gaia]
third_party/production/cmake

[git]
--depth 1 --branch $CMAKE_VERSION https://github.com/opencv/opencv.git
--depth 1 --branch $CMAKE_VERSION https://github.com/opencv/opencv_contrib.git

[pip]
numpy

[run]
cmake -D CMAKE_BUILD_TYPE=RELEASE \
    -D INSTALL_C_EXAMPLES=ON \
    -D INSTALL_PYTHON_EXAMPLES=ON \
    -D OPENCV_GENERATE_PKGCONFIG=ON \
    -D OPENCV_EXTRA_MODULES_PATH=opencv_contrib/modules \
    -D BUILD_EXAMPLES=ON opencv
make -j"$(nproc)"
make install
