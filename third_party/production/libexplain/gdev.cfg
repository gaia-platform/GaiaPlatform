[apt]
libacl1-dev
libcap-dev
lsof
groff
libtool-bin
quilt

[gaia]
third_party/production/bison

[git]
--branch "debian/1.4.D001-10" https://salsa.debian.org/debian/libexplain

[run]
cd libexplain
QUILT_PATCHES=debian/patches quilt push -a
# The configure script used by the libexplain build doesn't seem to respect the
# set value of CC as the linker frontend in libtool link mode, so we end up
# passing LDFLAGS=-fuse-ld=lld-10 to gcc, which doesn't like it because it's
# not in the canonical form -fuse-ld=bfd|gold|lld. Clang has no problem with
# -fuse-ld=lld-10, but we need to make gcc happy, so we rely on the fact that
# we've already symlinked ld.lld to ld.lld-10 and pass LDFLAGS=-fuse-ld=lld to
# configure instead.
CPPFLAGS='-fPIC' ./configure LDFLAGS=-fuse-ld=lld --prefix=/usr
make -j$(nproc)
make install
cd ..
rm -rf *
